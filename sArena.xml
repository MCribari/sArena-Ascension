<Ui xsi:schemaLocation="http://www.blizzard.com/wow/ui/ ..\FrameXML\UI.xsd">
    <Script file="Libs\Ace3\LibStub\LibStub.lua"/>
    <Include file="Libs\Ace3\CallbackHandler-1.0\CallbackHandler-1.0.xml"/>
    <Include file="Libs\Ace3\AceDB-3.0\AceDB-3.0.xml"/>
    <Include file="Libs\Ace3\AceDBOptions-3.0\AceDBOptions-3.0.xml"/>
    <Include file="Libs\Ace3\AceConsole-3.0\AceConsole-3.0.xml"/>
    <Include file="Libs\Ace3\AceGUI-3.0\AceGUI-3.0.xml"/>
    <Include file="Libs\Ace3\AceConfig-3.0\AceConfig-3.0.xml"/>
    <Include file="Libs\DRList-1.0\DRList-1.0.xml"/>
    <Script file="Libs\LibStub\LibStub.lua"/>

    <Script file="sArena.lua"/>
    <Script file="Config.lua"/>
    <Script file="Modules\Auras.lua"/>
    <Script file="Modules\DiminishingReturns.lua"/>
    <Script file="Modules\Racials.lua"/>
    <Script file="Modules\Trinkets.lua"/>
    <Script file="Modules\ArenaCountDown.lua"/>
    <Script file="Modules\SpecIcons.lua"/>
    <Script file="Modules\Combat.lua"/>
    <Script file="Layouts\BlizzArena.lua"/>
    <Script file="Layouts\Flat.lua"/>
	<Script file="Layouts\Xaryu.lua"/>

    <Frame name="sArenaDRTrackerTemplate" hidden="true" virtual="true">
        <Size x="40" y="40"/>
        <Layers>
            <Layer level="OVERLAY">
                <Texture parentKey="Border" file="Interface\Buttons\UI-Quickslot-Depress"/>
            </Layer>

            <Layer level="ARTWORK">
                <Texture parentKey="Icon">
                    <TexCoords left="0.08" right="0.92" top="0.08" bottom="0.92"/>
                </Texture>
            </Layer>
        </Layers>

        <Frames>
            <Cooldown parentKey="Cooldown" drawBling="false" hideCountdownNumbers="false" inherits="CooldownFrameTemplate">
                <Scripts>
                    <OnLoad>
                        for _, region in next, { self:GetRegions() } do
                        if region:GetObjectType() == "FontString" then
                        self.Text = region;
                        self.Text.fontFile = region:GetFont();
                        end
                        end
                        self.parent = self:GetParent();
                    </OnLoad>
                    <OnShow>
                        self.parent:GetParent():UpdateDRPositions();
                    </OnShow>
                    <OnHide>
                        self.parent:Hide();
                        self.parent.severity = 1;
                        self.parent:GetParent():UpdateDRPositions();
                    </OnHide>
                </Scripts>
            </Cooldown>
        </Frames>

        <Scripts>
            <OnLoad>
                self.severity = 1;
            </OnLoad>
        </Scripts>
    </Frame>

    <StatusBar name="sArenaCastBarTemplate" enablemouse="true" movable="true" virtual="true" hidden="true">
        <Layers>
            <Layer level="BACKGROUND">
                <Texture setAllPoints="true">
                    <Color r="0" g="0" b="0" a="0.5"/>
                </Texture>
            </Layer>

            <Layer level="ARTWORK">
                <Texture parentKey="BorderShield" file="Interface\CastingBar\UI-CastingBar-Arena-Shield" hidden="true">
                    <Size x="42" y="42"/>
                    <Anchors>
                        <Anchor point="LEFT" x="-25" y="0"/>
                    </Anchors>
                </Texture>
                <FontString parentKey="Text" inherits="GameFontHighlightSmall" setAllPoints="true"/>
                <Texture parentKey="Icon">
                    <Size x="16" y="16"/>
                    <Anchors>
                        <Anchor point="RIGHT" relativePoint="LEFT" x="-5" y="0"/>
                    </Anchors>
                </Texture>
            </Layer>

            <Layer level="OVERLAY">
                <Texture parentKey="Spark" file="Interface\CastingBar\UI-CastingBar-Spark" alphaMode="ADD">
                    <Size x="16" y="16"/>
                    <Anchors>
                        <Anchor point="CENTER"/>
                    </Anchors>
                </Texture>
                <Texture parentKey="Flash" alphaMode="ADD">
                    <!-- this needs to be here so the generic unit frame code will work right -->
                    <Size x="256" y="64"/>
                    <Anchors>
                        <Anchor point="TOP" x="0" y="28"/>
                    </Anchors>
                </Texture>
            </Layer>
        </Layers>
        <Scripts>
            <OnLoad function="sArena_CastBar"/>
            <OnEvent function="sArena_CastBar_OnEvent"/>
            <OnUpdate function="sArena_CastBar_OnUpdate"/>
            <OnShow function="CastingBarFrame_OnShow"/>
        </Scripts>
        <BarTexture file="Interface\TargetingFrame\UI-StatusBar"/>
        <BarColor r="1.0" g="0.7" b="0.0"/>
    </StatusBar>

    <Frame name="sArenaIconTemplate" enablemouse="true" movable="true" virtual="true">
        <Layers>
            <Layer level="OVERLAY" textureSubLevel="1">
                <Texture parentKey="Texture" setAllPoints="true"/>
            </Layer>
        </Layers>
        <Frames>
            <Cooldown parentKey="Cooldown" inherits="CooldownFrameTemplate">
                <Scripts>
                    <OnLoad>
                        for _, region in next, { self:GetRegions() } do
                        if region:GetObjectType() == "FontString" then
                        self.Text = region;
                        self.Text.fontFile = region:GetFont();
                        end
                        end
                    </OnLoad>
                </Scripts>
            </Cooldown>
        </Frames>
    </Frame>

    <Button name="sArenaEnemyFrameTemplate" frameStrata="MEDIUM" frameLevel="3" hidden="true" virtual="true" inherits="SecureActionButtonTemplate">
        <Layers>
            <Layer level="BORDER">
                <!-- Health/power bar is in this layer -->
                <Texture parentKey="ClassIcon"/>
            </Layer>


            <Layer level="OVERLAY">
                <FontString parentKey="Name" inherits="GameFontNormalSmall"/>
                <FontString parentKey="HealthText"/>
                <FontString parentKey="PowerText"/>
            </Layer>

            <Layer level="OVERLAY">
                <Texture parentKey="DeathIcon" atlas="DeathIcon" hidden="true">
                    <TexCoords left="0" right="1" top="0" bottom="0.5"/>
                </Texture>
            </Layer>
        </Layers>

        <Frames>
            <StatusBar parentKey="HealthBar" drawLayer="BORDER" useParentLevel="true"/>
            <StatusBar parentKey="PowerBar" drawLayer="BORDER" useParentLevel="true"/>
            <StatusBar parentKey="CastBar" inherits="sArenaCastBarTemplate"/>
            <Frame name="$parentHealthOverlay" parentKey="HealthOverlay" useParentLevel="true">
                <Anchors>
                    <Anchor point="TOPLEFT" relativePoint="TOPLEFT" x="0" y="0"/>
                    <Anchor point="BOTTOMRIGHT" relativePoint="BOTTOMRIGHT" x="0" y="0"/>
                </Anchors>
            </Frame>

            <Frame name="$parentPowerOverlay" parentKey="PowerOverlay" useParentLevel="true">
                <Anchors>
                    <Anchor point="TOPLEFT" relativePoint="TOPLEFT" x="0" y="0"/>
                    <Anchor point="BOTTOMRIGHT" relativePoint="BOTTOMRIGHT" x="0" y="0"/>
                </Anchors>
            </Frame>

            <Frame name="$parentBorderOverlay" parentKey="BorderOverlay" useParentLevel="true">
                <Anchors>
                    <Anchor point="TOPLEFT" relativePoint="TOPLEFT" x="0" y="0"/>
                    <Anchor point="BOTTOMRIGHT" relativePoint="BOTTOMRIGHT" x="0" y="0"/>
                </Anchors>
            </Frame>

            <Frame name="$parentSpecBorderOverlay" parentKey="SpecBorderOverlay" useParentLevel="true">
                <Anchors>
                    <Anchor point="TOPLEFT" relativePoint="TOPLEFT" x="0" y="0"/>
                    <Anchor point="BOTTOMRIGHT" relativePoint="BOTTOMRIGHT" x="0" y="0"/>
                </Anchors>
            </Frame>

            <Cooldown parentKey="ClassIconCooldown" useParentLevel="true" reverse="true" hideCountdownNumbers="false" inherits="CooldownFrameTemplate">
                <Scripts>
                    <OnLoad>
                        for _, region in next, { self:GetRegions() } do
                        if region:GetObjectType() == "FontString" then
                        self.Text = region;
                        self.Text.fontFile = region:GetFont();
                        end
                        end
                        self:SetAllPoints(self:GetParent().ClassIcon)
                        --self:SetSwipeTexture(1)
                        --self:SetSwipeColor(0, 0, 0, 0.6)
                        --self:SetDrawBling(false)
                    </OnLoad>
                </Scripts>
            </Cooldown>
            <Frame parentKey="SpecIcon" enablemouse="true" movable="true">
                <Layers>
                    <Layer level="ARTWORK">
                        <Texture parentKey="Texture" setAllPoints="true"/>
                    </Layer>
                </Layers>
            </Frame>
            <Frame parentKey="Trinket" inherits="sArenaIconTemplate"/>
            <Frame parentKey="Racial" inherits="sArenaIconTemplate"/>

            <Frame parentKey="incapacitate" inherits="sArenaDRTrackerTemplate"/>

            <Frame parentKey= "stun" inherits="sArenaDRTrackerTemplate"/>
            <Frame parentKey="random_stun" inherits="sArenaDRTrackerTemplate" enablemouse="true" movable="true"/>
            <Frame parentKey="random_root" inherits="sArenaDRTrackerTemplate"/>

            <Frame parentKey="root" inherits="sArenaDRTrackerTemplate"/>
            <Frame parentKey="disarm" inherits="sArenaDRTrackerTemplate"/>
            <Frame parentKey="fear" inherits="sArenaDRTrackerTemplate"/>
            <Frame parentKey="scatter" inherits="sArenaDRTrackerTemplate"/>
            <Frame parentKey="silence" inherits="sArenaDRTrackerTemplate"/>
            <Frame parentKey="horror" inherits="sArenaDRTrackerTemplate"/>
            <Frame parentKey="mind_control" inherits="sArenaDRTrackerTemplate"/>
            <Frame parentKey="cyclone" inherits="sArenaDRTrackerTemplate"/>
            <Frame parentKey="charge" inherits="sArenaDRTrackerTemplate"/>
            <Frame parentKey="opener_stun" inherits="sArenaDRTrackerTemplate"/>
            <Frame parentKey="counterattack" inherits="sArenaDRTrackerTemplate"/>
        </Frames>
        <Scripts>
            <OnLoad function="sArenaFrameMixin_OnLoad"/>
            <OnEvent function="sArenaFrameMixin_OnEvent"/>
            <OnEnter function="sArenaFrameMixin_OnEnter"/>
            <OnLeave function="sArenaFrameMixin_OnLeave"/>
        </Scripts>
    </Button>

    <Frame name="sArena" movable="true" parent="UIParent">
        <Size x="1" y="1"/>
        <Frames>
            <Button name="sArenaEnemyFrame1" parentKey="arena1" inherits="sArenaEnemyFrameTemplate" id="1">
                <Anchors>
                    <Anchor point="CENTER"/>
                </Anchors>
            </Button>
            <Button name="sArenaEnemyFrame2" parentKey="arena2" inherits="sArenaEnemyFrameTemplate" id="2"/>
            <Button name="sArenaEnemyFrame3" parentKey="arena3" inherits="sArenaEnemyFrameTemplate" id="3"/>
            <Button name="sArenaEnemyFrame4" parentKey="arena4" inherits="sArenaEnemyFrameTemplate" id="4"/>
            <Button name="sArenaEnemyFrame5" parentKey="arena5" inherits="sArenaEnemyFrameTemplate" id="5"/>
        </Frames>

        <Scripts>
            <OnLoad function="sArena_OnLoad"/>
            <OnEvent function="sArena_OnEvent"/>
        </Scripts>
    </Frame>
</Ui>
